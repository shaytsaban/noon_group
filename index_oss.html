<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Course Management System</title>

  <!-- Tailwind CSS (JIT) -->
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.3.3/dist/tailwind.min.css" rel="stylesheet" />

  <!-- Inter Font -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet" />

  <style>
    html {
      font-family: 'Inter', system-ui, -apple-system, sans-serif;
    }
    .gradient-card {
      background: linear-gradient(135deg, #2563eb, #10b981);
    }
    .focus-visible {
      outline: 2px solid #10b981;
      outline-offset: 2px;
    }
  </style>
</head>
<body class="bg-slate-50 dark:bg-slate-900 text-slate-800 dark:text-slate-200 transition-colors duration-300">
  <div id="root"></div>

  <!-- React & ReactDOM (ESM) -->
  <script type="module">
    import React, { useState, useEffect, useMemo, useCallback, useRef } from "https://esm.sh/react@18";
    import { createRoot } from "https://esm.sh/react-dom/client@18";

    // Libraries ---------------------------------------------------------------

    import {
      QueryClient,
      QueryClientProvider,
      useQuery,
      useMutation,
    } from "https://esm.sh/@tanstack/react-query@4";
    import { useForm } from "https://esm.sh/react-hook-form@7";
    import { motion, AnimatePresence } from "https://esm.sh/framer-motion@10";
    import toast, { Toaster } from "https://esm.sh/react-hot-toast@2";
    import {
      DragDropContext,
      Droppable,
      Draggable,
    } from "https://esm.sh/react-beautiful-dnd@13";
    import i18next from "https://esm.sh/i18next@22";
    import Chart from "https://cdn.jsdelivr.net/npm/chart.js@4.3.0/dist/chart.esm.min.js";

    // ------------------------------------------------------------------------
    // i18n setup
    // ------------------------------------------------------------------------
    i18next.init({
      lng: "en",
      fallbackLng: "en",
      resources: {
        en: {
          translation: {
            dashboard: "Dashboard",
            courses: "Courses",
            students: "Students",
            content: "Content",
            metrics: {
              totalCourses: "Total Courses",
              totalStudents: "Total Students",
              completions: "Completions",
            },
            quickActions: "Quick Actions",
            recentActivity: "Recent Activity",
            searchPlaceholder: "Search...",
            filterAll: "All",
            filterActive: "Active",
            filterArchived: "Archived",
            addCourse: "Add Course",
            bulkDelete: "Delete Selected",
            export: "Export",
            loading: "Loading...",
            noData: "No data",
            profile: "Profile",
            uploadAvatar: "Upload Avatar",
            enrollmentStatus: "Enrollment",
            status: {
              enrolled: "Enrolled",
              pending: "Pending",
              completed: "Completed",
            },
            darkMode: "Dark Mode",
            language: "Language",
            role: "Role",
            admin: "Admin",
            instructor: "Instructor",
            student: "Student",
            save: "Save",
            cancel: "Cancel",
            versionHistory: "Version History",
          },
        },
        es: {
          translation: {
            dashboard: "Tablero",
            courses: "Cursos",
            students: "Estudiantes",
            content: "Contenido",
            metrics: {
              totalCourses: "Cursos Totales",
              totalStudents: "Estudiantes Totales",
              completions: "Completados",
            },
            quickActions: "Acciones Rápidas",
            recentActivity: "Actividad Reciente",
            searchPlaceholder: "Buscar...",
            filterAll: "Todo",
            filterAll: "Todo",
            filterActive: "Activos",
            filterArchived: "Archivados",
            addCourse: "Añadir Curso",
            bulkDelete: "Eliminar Seleccionados",
            export: "Exportar",
            loading: "Cargando...",
            noData: "Sin datos",
            profile: "Perfil",
            uploadAvatar: "Subir Avatar",
            enrollmentStatus: "Matrícula",
            status: {
              enrolled: "Matriculado",
              pending: "Pendiente",
              completed: "Completado",
            },
            darkMode: "Modo Oscuro",
            language: "Idioma",
            role: "Rol",
            admin: "Administrador",
            instructor: "Instructor",
            student: "Estudiante",
            save: "Guardar",
            cancel: "Cancelar",
            versionHistory: "Historial de versiones",
          },
        },
      },
    });

    // ------------------------------------------------------------------------
    // Utility Hooks
    // ------------------------------------------------------------------------
    const useDebounce = (value, delay = 300) => {
      const [debounced, setDebounced] = useState(value);
      useEffect(() => {
        const id = setTimeout(() => setDebounced(value), delay);
        return () => clearTimeout(id);
      }, [value, delay]);
      return debounced;
    };

    // ------------------------------------------------------------------------
    // Mock API (simulated with Promises)
    // ------------------------------------------------------------------------
    const mockFetch = (data, ms = 1000) =>
      new Promise((resolve) => setTimeout(() => resolve(data), ms));

    const mockData = {
      metrics: {
        totalCourses: 12,
        totalStudents: 256,
        completions: 183,
      },
      recentActivity: [
        {
          id: 1,
          user: "Alice Johnson",
          action: "enrolled in \"Advanced React\"",
          time: "2 hrs ago",
          avatar: "https://i.pravatar.cc/40?img=1",
        },
        {
          id: 2,
          user: "Bob Smith",
          action: "completed \"Intro to TypeScript\"",
          time: "5 hrs ago",
          avatar: "https://i.pravatar.cc/40?img=2",
        },
        {
          id: 3,
          user: "Clara Lee",
          action: "uploaded new material to \"UI/UX Basics\"",
          time: "1 day ago",
          avatar: "https://i.pravatar.cc/40?img=3",
        },
      ],
      courses: [
        {
          id: "c1",
          title: "Intro to React",
          progress: 0.75,
          cover: "https://picsum.photos/seed/react/400/200",
        },
        {
          id: "c2",
          title: "Advanced React Patterns",
          progress: 0.4,
          cover: "https://picsum.photos/seed/advanced/400/200",
        },
        {
          id: "c3",
          title: "Node.js Fundamentals",
          progress: 0.9,
          cover: "https://picsum.photos/seed/node/400/200",
        },
        {
          id: "c4",
          title: "Database Design",
          progress: 0.2,
          cover: "https://picsum.photos/seed/db/400/200",
        },
      ],
      students: Array.from({ length: 57 }, (_, i) => ({
        id: `s${i + 1}`,
        name: `Student ${i + 1}`,
        email: `student${i + 1}@example.com`,
        status: ["enrolled", "pending", "completed"][i % 3],
        avatar: `https://i.pravatar.cc/40?img=${(i % 70) + 1}`,
      })),
    };

    // ------------------------------------------------------------------------
    // Main App
    // ------------------------------------------------------------------------
    const queryClient = new QueryClient();

    const App = () => {
      // Global UI state
      const [isDark, setIsDark] = useState(
        () => !!localStorage.getItem("dark")
      );
      const [lang, setLang] = useState(i18next.language);
      const [role, setRole] = useState("admin"); // demo role

      // Notification badge demo (real‑time)
      const [notifCount, setNotifCount] = useState(0);
      useEffect(() => {
        const interval = setInterval(() => {
          setNotifCount((c) => c + 1);
        }, 15000);
        return () => clearInterval(interval);
      }, []);

      // Apply dark mode class to <html>
      useEffect(() => {
        const el = document.documentElement;
        if (isDark) {
          el.classList.add("dark");
          localStorage.setItem("dark", "1");
        } else {
          el.classList.remove("dark");
          localStorage.removeItem("dark");
        }
      }, [isDark]);

      // Change language
      useEffect(() => {
        i18next.changeLanguage(lang);
      }, [lang]);

      const t = i18next.t.bind(i18next);

      return (
        <QueryClientProvider client={queryClient}>
          <div className="min-h-screen flex flex-col">
            {/* Header */}
            <header className="bg-white dark:bg-slate-800 shadow-sm transition-colors duration-300">
              <div className="max-w-7xl mx-auto px-4 py-3 flex items-center justify-between">
                <h1 className="text-xl font-semibold text-slate-800 dark:text-slate-100">
                  {t("dashboard")}
                </h1>
                <div className="flex items-center space-x-4">
                  {/* Notification badge */}
                  <button
                    className="relative text-slate-600 dark:text-slate-300 focus-visible"
                    aria-label={t("recentActivity")}
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      className="h-6 w-6"
                      fill="none"
                      viewBox="0 0 24 24"
                      stroke="currentColor"
                    >
                      <path
                        strokeLinecap="round"
                        strokeLinejoin="round"
                        strokeWidth={2}
                        d="M15 17h5l-1.405-1.405C18.79 14.79 19 13.91 19 13V8a7 7 0 10-14 0v5c0 .91.21 1.79.595 2.595L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"
                      />
                    </svg>
                    {notifCount > 0 && (
                      <span className="absolute -top-1 -right-1 inline-flex items-center justify-center px-2 py-0.5 text-xs font-bold leading-none text-white bg-emerald-500 rounded-full">
                        {notifCount}
                      </span>
                    )}
                  </button>

                  {/* Dark mode toggle */}
                  <button
                    onClick={() => setIsDark(!isDark)}
                    className="focus-visible"
                    aria-label={t("darkMode")}
                  >
                    {isDark ? (
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        className="h-6 w-6 text-slate-600 dark:text-slate-300"
                        viewBox="0 0 20 20"
                        fill="currentColor"
                      >
                        <path
                          d="M10 2a8 8 0 000 16 8 8 0 010-16z"
                        />
                      </svg>
                    ) : (
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        className="h-6 w-6 text-slate-600 dark:text-slate-300"
                        viewBox="0 0 20 20"
                        fill="currentColor"
                      >
                        <path
                          d="M10 2a1 1 0 01.894.553l.447 1.342a.5.5 0 00.585.34l1.443-.413c.94-.268 1.842.579 1.568 1.515l-.422 1.41a.5.5 0 00.367.607l1.395.525c.887.333 1.014 1.55.222 1.975l-1.227.661a.5.5 0 00-.19.567l.246 1.47c.165.986-.764 1.781-1.682 1.394l-1.382-.59a.5.5 0 00-.538.096l-.961.96c-.677.678-1.874.24-2.06-.632l-.264-1.327a.5.5 0 00-.48-.403h-1.415c-1.069 0-1.548-1.368-.732-2.003l.974-.714a.5.5 0 00.167-.609l-.529-1.16c-.466-1.022.59-2.122 1.596-1.804l1.186.402c.27.092.56-.108.618-.382l.246-1.247c.213-1.081 1.593-1.458 2.166-.65l.81 1.15c.14.198.424.233.626.094l1.103-.761c.933-.644.528-2.119-.581-2.25l-1.43-.152c-.313-.033-.51-.363-.366-.65l.627-1.292c.476-1.009-.464-2.166-1.531-1.724l-1.31.5c-.162.062-.352-.016-.416-.175l-.308-.727c-.332-1.032-1.74-.998-2.01.07l-.15.627c-.069.285-.392.424-.673.287L9.104 4.94a1.001 1.001 0 01-.895-1.854z"
                        />
                      </svg>
                    )}
                  </button>

                  {/* Language selector */}
                  <select
                    value={lang}
                    onChange={(e) => setLang(e.target.value)}
                    className="bg-white dark:bg-slate-700 text-slate-800 dark:text-slate-200 border border-slate-300 dark:border-slate-600 rounded-md focus-visible"
                    aria-label={t("language")}
                  >
                    <option value="en">English</option>
                    <option value="es">Español</option>
                  </select>

                  {/* Role selector (demo) */}
                  <select
                    value={role}
                    onChange={(e) => setRole(e.target.value)}
                    className="bg-white dark:bg-slate-700 text-slate-800 dark:text-slate-200 border border-slate-300 dark:border-slate-600 rounded-md focus-visible"
                    aria-label={t("role")}
                  >
                    <option value="admin">{t("admin")}</option>
                    <option value="instructor">{t("instructor")}</option>
                    <option value="student">{t("student")}</option>
                  </select>
                </div>
              </div>
            </header>

            {/* Main Content */}
            <main className="flex-1 bg-slate-50 dark:bg-slate-900 transition-colors duration-300">
              <section className="max-w-7xl mx-auto px-4 py-6">
                <div className="grid grid-cols-1 md:grid-cols-12 gap-6">
                  {/* Dashboard Metrics */}
                  <MetricsCard />
                  {/* Recent Activity */}
                  <RecentActivity />
                </div>

                {/* Courses Section */}
                <section className="mt-8">
                  <h2 className="text-2xl font-semibold text-slate-800 dark:text-slate-100 mb-4">
                    {t("courses")}
                  </h2>
                  <CourseManagement />
                </section>

                {/* Students Section */}
                <section className="mt-8">
                  <h2 className="text-2xl font-semibold text-slate-800 dark:text-slate-100 mb-4">
                    {t("students")}
                  </h2>
                  <StudentManagement />
                </section>

                {/* Content Section */}
                <section className="mt-8">
                  <h2 className="text-2xl font-semibold text-slate-800 dark:text-slate-100 mb-4">
                    {t("content")}
                  </h2>
                  <ContentManagement />
                </section>
              </section>
            </main>

            {/* Toast Container */}
            <Toaster position="bottom-right" />
          </div>
        </QueryClientProvider>
      );
    };

    // ------------------------------------------------------------------------
    // Metrics Card Component (Dashboard)
    // ------------------------------------------------------------------------
    const MetricsCard = () => {
      const { data, isLoading } = useQuery(
        ["metrics"],
        () => mockFetch(mockData.metrics, 1200),
        { staleTime: 5 * 60 * 1000 }
      );

      const t = i18next.t.bind(i18next);

      return (
        <div className="md:col-span-8 space-y-4">
          <div className="grid grid-cols-1 sm:grid-cols-3 gap-4">
            {/* Card 1 */}
            <MetricItem
              label={t("metrics.totalCourses")}
              value={data?.totalCourses}
              loading={isLoading}
            />
            {/* Card 2 */}
            <MetricItem
              label={t("metrics.totalStudents")}
              value={data?.totalStudents}
              loading={isLoading}
            />
            {/* Card 3 */}
            <MetricItem
              label={t("metrics.completions")}
              value={data?.completions}
              loading={isLoading}
            />
          </div>

          {/* Chart Widget */}
          <ChartWidget />
        </div>
      );
    };

    const MetricItem = ({ label, value, loading }) => {
      return (
        <div className="gradient-card text-white rounded-lg p-4 shadow-sm transition-transform transform hover:scale-105 hover:shadow-md">
          <div className="flex flex-col">
            <span className="text-sm uppercase">{label}</span>
            <span className="text-2xl font-semibold mt-1">
              {loading ? (
                <span className="animate-pulse block h-6 w-16 bg-white/30 rounded"></span>
              ) : (
                value
              )}
            </span>
          </div>
        </div>
      );
    };

    // ------------------------------------------------------------------------
    // Chart Widget (Dashboard)
    // ------------------------------------------------------------------------
    const ChartWidget = () => {
      const chartRef = useRef(null);
      const { data, isLoading } = useQuery(
        ["chartData"],
        () =>
          mockFetch(
            {
              labels: ["Jan", "Feb", "Mar", "Apr", "May", "Jun"],
              datasets: [
                {
                  label: "Enrollments",
                  data: [30, 45, 28, 60, 70, 55],
                  backgroundColor: "#2563eb",
                  borderColor: "#2563eb",
                },
                {
                  label: "Completions",
                  data: [20, 35, 25, 50, 65, 45],
                  backgroundColor: "#10b981",
                  borderColor: "#10b981",
                },
              ],
            },
            1300
          ),
        { staleTime: 2 * 60 * 1000 }
      );

      useEffect(() => {
        if (chartRef.current && data) {
          const ctx = chartRef.current.getContext("2d");
          new Chart(ctx, {
            type: "bar",
            data,
            options: {
              responsive: true,
              plugins: {
                legend: {
                  labels: {
                    color: "#1e293b",
                  },
                },
                tooltip: {
                  backgroundColor: "#fff",
                  titleColor: "#1e293b",
                  bodyColor: "#1e293b",
                  borderColor: "#e2e8f0",
                  borderWidth: 1,
                },
              },
              scales: {
                x: {
                  ticks: { color: "#1e293b" },
                  grid: { display: false },
                },
                y: {
                  ticks: { color: "#1e293b" },
                  grid: { color: "#e2e8f0" },
                },
              },
            },
          });
        }
      }, [data]);

      return (
        <div className="bg-white dark:bg-slate-800 rounded-lg p-4 shadow-sm mt-4 relative">
          {isLoading && (
            <div className="absolute inset-0 flex items-center justify-center bg-white/80 dark:bg-slate-800/80">
              <div className="animate-pulse text-slate-600 dark:text-slate-300">
                {i18next.t("loading")}...
              </div>
            </div>
          )}
          <canvas ref={chartRef}></canvas>
        </div>
      );
    };

    // ------------------------------------------------------------------------
    // Recent Activity Component
    // ------------------------------------------------------------------------
    const RecentActivity = () => {
      const { data, isLoading } = useQuery(
        ["activity"],
        () => mockFetch(mockData.recentActivity, 1100),
        { staleTime: 60 * 1000 }
      );

      const t = i18next.t.bind(i18next);

      return (
        <div className="md:col-span-4 bg-white dark:bg-slate-800 rounded-lg shadow-sm p-4 transition-colors duration-300">
          <h3 className="text-lg font-semibold mb-3">{t("recentActivity")}</h3>
          {isLoading ? (
            <div className="space-y-2">
              {[1, 2, 3].map((i) => (
                <div key={i} className="flex items-center space-x-2 animate-pulse">
                  <div className="w-10 h-10 bg-slate-300 dark:bg-slate-600 rounded-full"></div>
                  <div className="flex-1 space-y-1">
                    <div className="h-3 bg-slate-300 dark:bg-slate-600 rounded w-3/4"></div>
                    <div className="h-2 bg-slate-200 dark:bg-slate-700 rounded w-1/2"></div>
                  </div>
                </div>
              ))}
            </div>
          ) : (
            <ul className="space-y-3">
              {data.map((item) => (
                <li key={item.id} className="flex items-center space-x-3">
                  <img
                    src={item.avatar}
                    alt={item.user}
                    className="w-10 h-10 rounded-full object-cover"
                  />
                  <div className="flex-1">
                    <p className="text-sm font-medium">{item.user}</p>
                    <p className="text-xs text-slate-600 dark:text-slate-400">
                      {item.action}
                    </p>
                  </div>
                  <span className="text-xs text-slate-500 dark:text-slate-400">
                    {item.time}
                  </span>
                </li>
              ))}
            </ul>
          )}
        </div>
      );
    };

    // ------------------------------------------------------------------------
    // Course Management Component
    // ------------------------------------------------------------------------
    const CourseManagement = () => {
      const { data: courses, isLoading, refetch } = useQuery(
        ["courses"],
        () => mockFetch(mockData.courses, 1500),
        { staleTime: 5 * 60 * 1000 }
      );

      const [selected, setSelected] = useState(new Set());
      const [filter, setFilter] = useState("");
      const debouncedFilter = useDebounce(filter, 300);
      const [statusFilter, setStatusFilter] = useState("all");

      const t = i18next.t.bind(i18next);

      const filteredCourses = useMemo(() => {
        if (!courses) return [];
        return courses.filter((c) => {
          const matchesTitle = c.title
            .toLowerCase()
            .includes(debouncedFilter.toLowerCase());
          // Since mock data has no status, we'll ignore status filter for demo
          return matchesTitle;
        });
      }, [courses, debouncedFilter, statusFilter]);

      // Drag & Drop handler
      const onDragEnd = (result) => {
        if (!result.destination) return;
        const reordered = Array.from(filteredCourses);
        const [removed] = reordered.splice(result.source.index, 1);
        reordered.splice(result.destination.index, 0, removed);
        // In a real app you'd send the new order to the backend.
        toast.success("Course order updated");
      };

      const toggleSelect = (id) => {
        setSelected((prev) => {
          const newSet = new Set(prev);
          if (newSet.has(id)) newSet.delete(id);
          else newSet.add(id);
          return newSet;
        });
      };

      const bulkDelete = () => {
        if (selected.size === 0) {
          toast.error("Select at least one course");
          return;
        }
        toast.success(`${selected.size} course(s) deleted`);
        // Reset selection for demo
        setSelected(new Set());
      };

      const addCourse = () => {
        toast.success("Add Course modal would appear");
      };

      return (
        <div className="bg-white dark:bg-slate-800 rounded-lg shadow-sm p-4 transition-colors duration-300">
          {/* Action Bar */}
          <div className="flex flex-col sm:flex-row items-center justify-between mb-4 space-y-2 sm:space-y-0">
            <div className="flex items-center space-x-2">
              <input
                type="text"
                placeholder={t("searchPlaceholder")}
                value={filter}
                onChange={(e) => setFilter(e.target.value)}
                className="border border-slate-300 dark:border-slate-600 rounded-md px-2 py-1 focus-visible outline-none"
                aria-label={t("searchPlaceholder")}
              />
              {/* Filter Chips */}
              <div className="flex space-x-1">
                {["all", "active", "archived"].map((chip) => (
                  <button
                    key={chip}
                    onClick={() => setStatusFilter(chip)}
                    className={`px-2 py-0.5 rounded-md text-sm ${
                      statusFilter === chip
                        ? "bg-emerald-500 text-white"
                        : "bg-slate-200 dark:bg-slate-700 text-slate-800 dark:text-slate-200"
                    } focus-visible`}
                  >
                    {t(`filter${chip.charAt(0).toUpperCase() + chip.slice(1)}`) ||
                      chip}
                  </button>
                ))}
              </div>
            </div>

            <div className="flex space-x-2">
              {selected.size > 0 && (
                <button
                  onClick={bulkDelete}
                  className="bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded-md transition-colors focus-visible"
                >
                  {t("bulkDelete")}
                </button>
              )}
              <button
                onClick={addCourse}
                className="bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded-md transition-colors focus-visible"
              >
                {t("addCourse")}
              </button>
            </div>
          </div>

          {/* Courses Grid */}
          {isLoading ? (
            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
              {[1, 2, 3, 4].map((i) => (
                <div
                  key={i}
                  className="animate-pulse bg-slate-200 dark:bg-slate-700 h-48 rounded-lg"
                />
              ))}
            </div>
          ) : (
            <DragDropContext onDragEnd={onDragEnd}>
              <Droppable droppableId="courses" direction="vertical">
                {(provided) => (
                  <div
                    ref={provided.innerRef}
                    {...provided.droppableProps}
                    className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"
                  >
                    {filteredCourses.map((course, index) => (
                      <Draggable
                        key={course.id}
                        draggableId={course.id}
                        index={index}
                      >
                        {(provided, snapshot) => (
                          <div
                            ref={provided.innerRef}
                            {...provided.draggableProps}
                            {...provided.dragHandleProps}
                            className={`relative bg-white dark:bg-slate-800 rounded-lg shadow-sm overflow-hidden transition-transform duration-200 ${
                              snapshot.isDragging ? "scale-105 shadow-lg" : ""
                            }`}
                          >
                            {/* Checkbox for bulk selection */}
                            <input
                              type="checkbox"
                              checked={selected.has(course.id)}
                              onChange={() => toggleSelect(course.id)}
                              className="absolute top-2 left-2 h-5 w-5 text-emerald-600 border-gray-300 rounded focus-visible"
                              aria-label={`Select ${course.title}`}
                            />
                            <img
                              src={course.cover}
                              alt={course.title}
                              className="w-full h-32 object-cover"
                            />
                            <div className="p-3">
                              <h4 className="font-semibold text-slate-800 dark:text-slate-100 truncate">
                                {course.title}
                              </h4>
                              <div className="mt-2 h-2 bg-slate-200 dark:bg-slate-700 rounded">
                                <div
                                  className="h-2 bg-emerald-500 rounded"
                                  style={{ width: `${course.progress * 100}%` }}
                                ></div>
                              </div>
                              <p className="text-xs text-slate-600 dark:text-slate-400 mt-1">
                                {Math.round(course.progress * 100)}% Complete
                              </p>
                            </div>
                          </div>
                        )}
                      </Draggable>
                    ))}
                    {provided.placeholder}
                  </div>
                )}
              </Droppable>
            </DragDropContext>
          )}
        </div>
      );
    };

    // ------------------------------------------------------------------------
    // Student Management Component
    // ------------------------------------------------------------------------
    const StudentManagement = () => {
      const { data: students, isLoading } = useQuery(
        ["students"],
        () => mockFetch(mockData.students, 1500),
        { staleTime: 5 * 60 * 1000 }
      );

      const [page, setPage] = useState(1);
      const pageSize = 10;

      const totalPages = useMemo(() => {
        if (!students) return 0;
        return Math.ceil(students.length / pageSize);
      }, [students]);

      const currentPageData = useMemo(() => {
        if (!students) return [];
        const start = (page - 1) * pageSize;
        return students.slice(start, start + pageSize);
      }, [students, page]);

      const t = i18next.t.bind(i18next);

      const exportCsv = () => {
        if (!students) return;
        const header = ["Name", "Email", "Status"];
        const rows = students.map((s) => [s.name, s.email, s.status]);
        const csvContent =
          "data:text/csv;charset=utf-8," +
          [header, ...rows]
            .map((e) => e.map((v) => `"${v}"`).join(","))
            .join("\n");
        const encodedUri = encodeURI(csvContent);
        const link = document.createElement("a");
        link.setAttribute("href", encodedUri);
        link.setAttribute("download", "students.csv");
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
      };

      const statusColors = {
        enrolled: "bg-emerald-500",
        pending: "bg-yellow-500",
        completed: "bg-indigo-500",
      };

      return (
        <div className="bg-white dark:bg-slate-800 rounded-lg shadow-sm p-4 transition-colors duration-300">
          <div className="flex items-center justify-between mb-4">
            <h3 className="text-lg font-medium">{t("students")}</h3>
            <button
              onClick={exportCsv}
              className="bg-slate-200 dark:bg-slate-700 text-slate-800 dark:text-slate-100 px-3 py-1 rounded-md hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors focus-visible"
            >
              {t("export")}
            </button>
          </div>

          {/* Table */}
          <div className="overflow-x-auto">
            {isLoading ? (
              <div className="space-y-2">
                {[1, 2, 3, 4, 5].map((i) => (
                  <div
                    key={i}
                    className="flex items-center space-x-3 animate-pulse"
                  >
                    <div className="w-10 h-10 bg-slate-300 dark:bg-slate-600 rounded-full"></div>
                    <div className="flex-1 space-y-1">
                      <div className="h-3 w-1/3 bg-slate-300 dark:bg-slate-600 rounded"></div>
                      <div className="h-2 w-1/4 bg-slate-200 dark:bg-slate-500 rounded"></div>
                    </div>
                  </div>
                ))}
              </div>
            ) : (
              <table className="min-w-full text-sm text-slate-800 dark:text-slate-200">
                <thead className="bg-slate-100 dark:bg-slate-700">
                  <tr>
                    <th className="px-4 py-2 text-left">#</th>
                    <th className="px-4 py-2 text-left">{t("profile")}</th>
                    <th className="px-4 py-2 text-left">{t("enrollmentStatus")}</th>
                    <th className="px-4 py-2 text-left">{t("status.enrolled")}</th>
                  </tr>
                </thead>
                <tbody>
                  {currentPageData.map((student, idx) => (
                    <tr
                      key={student.id}
                      className="border-b border-slate-200 dark:border-slate-600"
                    >
                      <td className="px-4 py-2">{(page - 1) * pageSize + idx + 1}</td>
                      <td className="px-4 py-2 flex items-center space-x-2">
                        <img
                          src={student.avatar}
                          alt={student.name}
                          className="w-8 h-8 rounded-full object-cover"
                        />
                        <div>
                          <p className="font-medium">{student.name}</p>
                          <p className="text-xs text-slate-500 dark:text-slate-400">{student.email}</p>
                        </div>
                      </td>
                      <td className="px-4 py-2">
                        <span
                          className={`px-2 py-0.5 rounded text-xs text-white ${statusColors[student.status]}`}
                        >
                          {t(`status.${student.status}`)}
                        </span>
                      </td>
                      <td className="px-4 py-2">
                        {/* Action button placeholder */}
                        <button
                          className="bg-blue-500 hover:bg-blue-600 text-white px-2 py-1 rounded-md focus-visible"
                        >
                          {t("profile")}
                        </button>
                      </td>
                    </tr>
                  ))}
                </tbody>
              </table>
            )}
          </div>

          {/* Pagination */}
          <div className="flex justify-end mt-4 space-x-2">
            <button
              onClick={() => setPage((p) => Math.max(p - 1, 1))}
              disabled={page === 1}
              className="px-3 py-1 rounded-md bg-slate-200 dark:bg-slate-700 text-slate-800 dark:text-slate-100 disabled:opacity-50 focus-visible"
            >
              &lt;
            </button>
            <span className="self-center">
              {page} / {totalPages}
            </span>
            <button
              onClick={() => setPage((p) => Math.min(p + 1, totalPages))}
              disabled={page === totalPages}
              className="px-3 py-1 rounded-md bg-slate-200 dark:bg-slate-700 text-slate-800 dark:text-slate-100 disabled:opacity-50 focus-visible"
            >
              &gt;
            </button>
          </div>
        </div>
      );
    };

    // ------------------------------------------------------------------------
    // Content Management Component (Rich Text Placeholder)
    // ------------------------------------------------------------------------
    const ContentManagement = () => {
      const {
        register,
        handleSubmit,
        reset,
        formState: { errors, isSubmitting },
      } = useForm({ defaultValues: { title: "", body: "" } });

      const [versions, setVersions] = useState([]);

      const t = i18next.t.bind(i18next);

      const onSubmit = (data) => {
        // Simulate save
        return new Promise((resolve) => {
          setTimeout(() => {
            toast.success("Content saved");
            setVersions((prev) => [...prev, { ...data, date: new Date() }]);
            reset();
            resolve();
          }, 800);
        });
      };

      const onFileDrop = (e) => {
        e.preventDefault();
        const files = e.dataTransfer.files;
        if (files.length) {
          toast.success(`${files.length} file(s) uploaded`);
        }
      };

      return (
        <div
          className="bg-white dark:bg-slate-800 rounded-lg shadow-sm p-6 transition-colors duration-300"
          onDrop={onFileDrop}
          onDragOver={(e) => e.preventDefault()}
        >
          <form onSubmit={handleSubmit(onSubmit)} className="space-y-4">
            <div>
              <label className="block font-medium mb-1">{t("title") || "Title"}</label>
              <input
                type="text"
                placeholder={t("title") || "Title"}
                {...register("title", { required: true })}
                className={`w-full border ${
                  errors.title ? "border-red-500" : "border-slate-300 dark:border-slate-600"
                } rounded-md px-3 py-2 focus-visible outline-none`}
                aria-invalid={!!errors.title}
                aria-label={t("title") || "Title"}
              />
              {errors.title && (
                <p className="text-red-600 text-sm mt-1">{t("required") || "This field is required"}</p>
              )}
            </div>

            <div>
              <label className="block font-medium mb-1">{t("content")}</label>
              <textarea
                placeholder={t("content") || "Write something..."}
                {...register("body", { required: true })}
                className={`w-full h-40 border ${
                  errors.body ? "border-red-500" : "border-slate-300 dark:border-slate-600"
                } rounded-md p-3 focus-visible outline-none`}
                aria-invalid={!!errors.body}
                aria-label={t("content")}
              />
              {errors.body && (
                <p className="text-red-600 text-sm mt-1">{t("required") || "This field is required"}</p>
              )}
            </div>

            <div className="flex items-center space-x-2">
              <button
                type="submit"
                disabled={isSubmitting}
                className="bg-emerald-500 hover:bg-emerald-600 text-white px-4 py-2 rounded-md focus-visible transition-colors disabled:opacity-50"
              >
                {isSubmitting ? t("saving") || "Saving..." : t("save")}
              </button>
              <button
                type="button"
                onClick={() => reset()}
                className="bg-slate-200 dark:bg-slate-700 text-slate-800 dark:text-slate-100 px-4 py-2 rounded-md focus-visible hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors"
              >
                {t("cancel")}
              </button>
            </div>
          </form>

          {/* Version History */}
          {versions.length > 0 && (
            <div className="mt-6">
              <h4 className="font-semibold mb-2">{t("versionHistory")}</h4>
              <ul className="space-y-2">
                {versions
                  .slice()
                  .reverse()
                  .map((v, idx) => (
                    <li key={idx} className="border-b border-slate-200 dark:border-slate-600 pb-2">
                      <p className="text-sm font-medium">{v.title}</p>
                      <p className="text-xs text-slate-500 dark:text-slate-400">
                        {v.date.toLocaleString()}
                      </p>
                    </li>
                  ))}
              </ul>
            </div>
          )}
        </div>
      );
    };

    // ------------------------------------------------------------------------
    // Render the App
    // ------------------------------------------------------------------------
    const container = document.getElementById("root");
    const root = createRoot(container);
    root.render(<App />);
  </script>
</body>
</html>
